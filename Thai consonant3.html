<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubmaokorsang ¬∑ Thai Consonant Drill (Karaoke Choices)</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Noto Sans Thai', 'Tahoma', system-ui, sans-serif;
        }
        body {
            background: linear-gradient(145deg, #1a2639 0%, #2c3e50 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 2rem 1rem;
        }
        .game-container {
            max-width: 1100px;
            width: 100%;
            background: #fef9e8;
            background-image: radial-gradient(circle at 10% 30%, rgba(255,243,188,0.3) 0%, transparent 25%);
            border-radius: 64px 64px 48px 48px;
            box-shadow: 0 20px 30px rgba(0,0,0,0.5);
            padding: 2rem 2rem 3rem;
            border-bottom: 8px solid #b9935c;
        }
        .team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #2d2010;
            padding: 0.6rem 2rem;
            border-radius: 50px;
            margin-bottom: 2rem;
            color: #ffde9e;
            border: 2px solid #ebc06f;
            box-shadow: inset 0 -2px 0 #4a3a1e;
        }
        .team-name {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: 6px;
            text-shadow: 3px 3px 0 #5e3a1c;
            word-break: break-word;
        }
        .heart-row {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            font-size: 2.2rem;
        }
        .drill-area {
            background: #fff8e7;
            border-radius: 60px 60px 40px 40px;
            padding: 2rem 1.5rem;
            box-shadow: inset 0 -6px 0 #c0a080, inset 0 2px 10px rgba(0,0,0,0.05);
        }
        /* giant Thai consonant ‚Äì no pronunciation text below it */
        .consonant-display {
            font-size: 12rem;
            text-align: center;
            line-height: 1;
            padding: 0.2rem;
            margin: 0.5rem 0 1rem 0;
            color: #1e1e2a;
            text-shadow: 6px 6px 0 #e6d5b8, 8px 8px 10px rgba(0,0,0,0.2);
            font-weight: 550;
            letter-spacing: 0.5rem;
        }
        /* pronunciation area REMOVED ‚Äì no answer spoiler */
        .mistake-note {
            background: #ffe0b5;
            border-radius: 30px;
            padding: 0.8rem;
            text-align: center;
            margin: 1rem 0 0.2rem;
            font-style: italic;
            border-left: 8px solid #cb6e6e;
            color: #4d2e1b;
            font-size: 1.3rem;
            font-weight: 500;
            min-height: 4.5rem;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.2rem;
            margin: 2rem 0 1rem;
        }
        .choice-btn {
            background: #f4e5c7;
            border: 4px solid #c49a6c;
            border-radius: 50px;
            padding: 1rem 0.8rem;
            font-size: 1.6rem;
            font-weight: 700;
            color: #27190e;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            transition: 0.1s ease;
            box-shadow: 0 7px 0 #8b6b4b, 0 10px 12px rgba(0,0,0,0.1);
            cursor: pointer;
            line-height: 1.2;
            word-break: break-word;
            text-transform: lowercase;
        }
        .choice-btn:first-letter {
            text-transform: uppercase;
        }
        .choice-btn:hover {
            background: #ffefcf;
            border-color: #b3824a;
            transform: translateY(3px);
            box-shadow: 0 4px 0 #6b4f37, 0 12px 16px rgba(0,0,0,0.1);
        }
        .choice-btn:active {
            transform: translateY(7px);
            box-shadow: 0 1px 0 #5a3f2c;
        }
        .disabled-btn, .choice-btn:disabled {
            opacity: 0.45;
            pointer-events: none;
            transform: none;
            box-shadow: 0 4px 0 #6b4f37;
            filter: grayscale(0.7);
        }
        .control-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .next-btn {
            background: #4f6d7f;
            border: none;
            padding: 0.8rem 2.2rem;
            border-radius: 40px;
            font-size: 1.6rem;
            font-weight: bold;
            color: #fcf3e0;
            border-bottom: 8px solid #2c4a5c;
            letter-spacing: 4px;
            cursor: pointer;
            transition: 0.07s;
            box-shadow: 0 5px 10px #00000033;
        }
        .next-btn:hover {
            background: #618b9e;
            border-bottom-width: 5px;
            transform: translateY(3px);
        }
        .next-btn:active {
            transform: translateY(7px);
            border-bottom-width: 2px;
        }
        .restart-btn {
            background: #d9af6b;
            border-bottom: 8px solid #8f6a3c;
            color: #25201a;
            padding: 0.8rem 1.8rem;
            font-size: 1.3rem;
        }
        .gameover-message {
            background: #1f1a15;
            color: #ffeaa5;
            padding: 1rem;
            border-radius: 40px;
            text-align: center;
            font-size: 2rem;
            font-weight: 800;
            margin: 1rem 0;
            border: 3px solid #e6b422;
        }
        .footer-small {
            margin-top: 1.2rem;
            color: #4f4233;
            text-align: center;
            font-size: 0.95rem;
            font-weight: 500;
        }
        .status-text {
            font-size: 1.3rem;
            background: #e7dcc0;
            padding: 0.5rem 1.8rem;
            border-radius: 30px;
            border: 2px solid #ba9b6b;
            font-weight: 600;
        }
        /* extra container removed ‚Äì no spoiler */
    </style>
</head>
<body>
    <div class="game-container">
        <!-- TEAM HEADER: RUBMAOKORSANG -->
        <div class="team-header">
            <span class="team-name">üêò RUBMAOKORSANG</span>
            <div class="heart-row" id="heartDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        </div>

        <div class="drill-area">
            <!-- ONLY the Thai consonant ‚Äì no pronunciation text below it (the karaoke answer is GONE) -->
            <div class="consonant-display" id="currentConsonant">‡∏Å</div>
            
            <!-- correction & mistake feedback (no hidden answer, only after choice) -->
            <div id="correctionNote" class="mistake-note"></div>

            <!-- answer choices: ENGLISH KARAOKE style only ‚Äì no spoiler above -->
            <div class="options-grid" id="optionsContainer"></div>
            
            <div class="control-bar">
                <span class="status-text" id="heartsStatus">‚ù§Ô∏è 3</span>
                <span class="status-text" id="progressStatus">üìö 0/44</span>
                <div style="display: flex; gap: 15px;">
                    <button class="next-btn" id="nextButton">‚è© ‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
                    <button class="next-btn restart-btn" id="restartButton">üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            </div>
            <div id="gameoverMessage" class="gameover-message" style="display: none;">üíî GAME OVER üíî</div>
        </div>
        <div class="footer-small">
            ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å 44 ‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢ ¬∑ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≤‡∏£‡∏≤‡πÇ‡∏≠‡πÄ‡∏Å‡∏∞ ¬∑ Rubmaokorsang team
        </div>
    </div>

    <script>
        (function(){
            // ---------- TEAM: RUBMAOKORSANG  ----------
            // 44 Thai consonants with ENGLISH KARAOKE pronunciation (for choices & feedback)
            const THAI_CONSONANTS = [
                { char: "‡∏Å", karaoke: "gaw gai" },
                { char: "‡∏Ç", karaoke: "khaw khai" },
                { char: "‡∏É", karaoke: "khaw khuat" },
                { char: "‡∏Ñ", karaoke: "khaw khwai" },
                { char: "‡∏Ö", karaoke: "khaw khon" },    
                { char: "‡∏Ü", karaoke: "khaw ra-khang" },
                { char: "‡∏á", karaoke: "ngaw ngu" },
                { char: "‡∏à", karaoke: "jaw jaan" },
                { char: "‡∏â", karaoke: "chaw ching" },
                { char: "‡∏ä", karaoke: "chaw chang" },
                { char: "‡∏ã", karaoke: "saw so" },
                { char: "‡∏å", karaoke: "chaw choe" },
                { char: "‡∏ç", karaoke: "yaw ying" },
                { char: "‡∏é", karaoke: "daw cha-da" },
                { char: "‡∏è", karaoke: "dtaw pa-tak" },
                { char: "‡∏ê", karaoke: "thaw than" },
                { char: "‡∏ë", karaoke: "thaw mon-tho" },
                { char: "‡∏í", karaoke: "thaw phu-thao" },
                { char: "‡∏ì", karaoke: "naw nayn" },
                { char: "‡∏î", karaoke: "daw dek" },
                { char: "‡∏ï", karaoke: "dtaw tao" },
                { char: "‡∏ñ", karaoke: "thaw thung" },
                { char: "‡∏ó", karaoke: "thaw thahan" },
                { char: "‡∏ò", karaoke: "thaw thong" },
                { char: "‡∏ô", karaoke: "naw nu" },
                { char: "‡∏ö", karaoke: "baw bai-mai" },
                { char: "‡∏õ", karaoke: "bpaw bpla" },
                { char: "‡∏ú", karaoke: "phaw phueng" },
                { char: "‡∏ù", karaoke: "faw fa" },
                { char: "‡∏û", karaoke: "phaw phan" },
                { char: "‡∏ü", karaoke: "faw fan" },
                { char: "‡∏†", karaoke: "phaw sam-phao" },
                { char: "‡∏°", karaoke: "maw ma" },
                { char: "‡∏¢", karaoke: "yaw yak" },
                { char: "‡∏£", karaoke: "raw ruea" },
                { char: "‡∏•", karaoke: "law ling" },
                { char: "‡∏ß", karaoke: "waw waen" },
                { char: "‡∏®", karaoke: "saw sa-la" },
                { char: "‡∏©", karaoke: "saw rue-si" },
                { char: "‡∏™", karaoke: "saw suea" },
                { char: "‡∏´", karaoke: "haw hip" },
                { char: "‡∏¨", karaoke: "law ju-la" },
                { char: "‡∏≠", karaoke: "aw ang" },       
                { char: "‡∏Æ", karaoke: "haw nok-huk" }
            ];

            // Game state
            let currentLives = 3;
            let currentConsonantIndex = 0;
            let gameActive = false;
            let answerLocked = false;
            let mistakeThisRound = false;
            let roundConsonant = null;
            let usedIndices = [];
            let waitingForNext = false;
            let knownConsonants = new Set();

            // DOM elements
            const consonantDisplay = document.getElementById('currentConsonant');
            const correctionNote = document.getElementById('correctionNote');
            const optionsContainer = document.getElementById('optionsContainer');
            const nextButton = document.getElementById('nextButton');
            const restartButton = document.getElementById('restartButton');
            const heartDisplay = document.getElementById('heartDisplay');
            const heartsStatus = document.getElementById('heartsStatus');
            const progressStatus = document.getElementById('progressStatus');
            const gameoverMsg = document.getElementById('gameoverMessage');

            // Update hearts
            function updateHeartsUI() {
                let hearts = '';
                for (let i = 0; i < currentLives; i++) hearts += '‚ù§Ô∏è';
                for (let i = currentLives; i < 3; i++) hearts += 'üñ§';
                heartDisplay.innerHTML = hearts;
                heartsStatus.innerHTML = `‚ù§Ô∏è ${currentLives}`;
            }

            // Update progress counter
            function updateProgressUI() {
                const known = knownConsonants.size;
                const total = THAI_CONSONANTS.length;
                progressStatus.innerHTML = `üìö ${known}/${total}`;
            }

            // pick random consonant (no immediate repeat, skip known)
            function pickRandomConsonant() {
                // Get all consonants that are NOT known yet
                const unknownIndices = [];
                for (let i = 0; i < THAI_CONSONANTS.length; i++) {
                    if (!knownConsonants.has(THAI_CONSONANTS[i].char)) {
                        unknownIndices.push(i);
                    }
                }
                
                // If all have been learned, show them all again
                if (unknownIndices.length === 0) {
                    return Math.floor(Math.random() * THAI_CONSONANTS.length);
                }
                
                // Filter out from recently used to avoid immediate repeat
                let available = unknownIndices.filter(i => !usedIndices.includes(i));
                
                if (available.length === 0) {
                    available = unknownIndices;
                    usedIndices = [];
                }
                
                const randomIdx = Math.floor(Math.random() * available.length);
                const selectedIdx = available[randomIdx];
                usedIndices.push(selectedIdx);
                return selectedIdx;
            }

            // Load new consonant ‚Äì NO pronunciation box, only the character
            function loadNewConsonant() {
                if (!gameActive) return;
                if (currentLives <= 0) {
                    gameActive = false;
                    answerLocked = true;
                    waitingForNext = false;
                    gameoverMsg.style.display = 'block';
                    consonantDisplay.style.opacity = '0.5';
                    return;
                }

                gameoverMsg.style.display = 'none';
                consonantDisplay.style.opacity = '1';
                
                const newIdx = pickRandomConsonant();
                currentConsonantIndex = newIdx;
                roundConsonant = THAI_CONSONANTS[newIdx];
                
                consonantDisplay.textContent = roundConsonant.char;
                // NO pronunciation display ‚Äì spoiler removed
                correctionNote.innerHTML = ''; 
                
                answerLocked = false;
                mistakeThisRound = false;
                waitingForNext = false;
                
                generateOptions(roundConsonant);
            }

            // Generate 4 choices (English karaoke)
            function generateOptions(correctCons) {
                let otherCons = THAI_CONSONANTS.filter(c => c.char !== correctCons.char);
                let shuffled = [...otherCons].sort(() => Math.random() - 0.5);
                let wrongOptions = [];
                for (let i = 0; i < 3; i++) {
                    if (shuffled[i]) wrongOptions.push(shuffled[i]);
                }
                while (wrongOptions.length < 3) {
                    wrongOptions.push(THAI_CONSONANTS[Math.floor(Math.random() * THAI_CONSONANTS.length)]);
                }
                
                let choices = [
                    { cons: correctCons, isCorrect: true },
                    { cons: wrongOptions[0], isCorrect: false },
                    { cons: wrongOptions[1], isCorrect: false },
                    { cons: wrongOptions[2], isCorrect: false }
                ];
                
                // shuffle
                for (let i = choices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [choices[i], choices[j]] = [choices[j], choices[i]];
                }
                renderOptionButtons(choices);
            }

            // Buttons: only karaoke text, no extra hint
            function renderOptionButtons(choices) {
                optionsContainer.innerHTML = '';
                choices.forEach((choice) => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.setAttribute('data-char', choice.cons.char);
                    btn.setAttribute('data-correct', choice.isCorrect);
                    btn.innerHTML = `${choice.cons.karaoke}`;
                    
                    if (!gameActive || answerLocked || currentLives <= 0) {
                        btn.disabled = true;
                        btn.classList.add('disabled-btn');
                    }
                    
                    btn.addEventListener('click', function(e) {
                        if (!gameActive || answerLocked || currentLives <= 0) return;
                        handleAnswerClick(choice.isCorrect, choice.cons);
                    });
                    optionsContainer.appendChild(btn);
                });
            }

            // ---------- handle answer (only now the answer is revealed) ----------
            function handleAnswerClick(isCorrect, selectedCons) {
                if (!gameActive || answerLocked || currentLives <= 0) return;
                
                answerLocked = true;
                waitingForNext = true;
                
                const allBtns = document.querySelectorAll('.choice-btn');
                allBtns.forEach(btn => {
                    btn.disabled = true;
                    btn.classList.add('disabled-btn');
                });

                // ---- CORRECT ----
                if (isCorrect) {
                    correctionNote.innerHTML = `‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ${roundConsonant.char} ¬∑ ${roundConsonant.karaoke}`;
                    
                    // Mark as known
                    knownConsonants.add(roundConsonant.char);
                    updateProgressUI();
                    
                    if (roundConsonant.char === '‡∏≠') {
                        correctionNote.innerHTML += `<span style="color:#6a3e03;"> (aw ang) </span>`;
                    }
                } 
                // ---- MISTAKE ----
                else {
                    if (currentLives > 0) {
                        currentLives -= 1;
                        updateHeartsUI();
                    }
                    mistakeThisRound = true;
                    
                    let mistakeMsg = `‚ùå ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏¥‡∏î: "${selectedCons.karaoke}" `;
                    mistakeMsg += `¬∑ ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: "${roundConsonant.karaoke}" (${roundConsonant.char})`;
                    correctionNote.innerHTML = mistakeMsg;
                    
                    if (roundConsonant.char === '‡∏≠') {
                        correctionNote.innerHTML += `<br/>üîπ ‡∏≠ aw ang`;
                    }
                    if (selectedCons.char === '‡∏≠' && !isCorrect) {
                        correctionNote.innerHTML += `<br/>üìò ‡∏≠ aw ang`;
                    }

                    if (currentLives <= 0) {
                        gameActive = false;
                        gameoverMsg.style.display = 'block';
                        consonantDisplay.style.opacity = '0.5';
                    }
                }

                if (currentLives <= 0) {
                    gameActive = false;
                    gameoverMsg.style.display = 'block';
                }
            }

            // ---------- Next consonant ----------
            function nextConsonantAction() {
                if (!gameActive) {
                    if (currentLives <= 0) {
                        correctionNote.innerHTML = 'üíÄ ‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏î "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà"';
                    }
                    return;
                }
                if (!waitingForNext) {
                    correctionNote.innerHTML = '‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô (choose an answer)';
                    return;
                }
                if (currentLives > 0 && gameActive) {
                    loadNewConsonant();
                }
            }

            // ---------- Restart ----------
            function restartGame() {
                currentLives = 3;
                updateHeartsUI();
                knownConsonants.clear();
                updateProgressUI();
                gameActive = true;
                answerLocked = false;
                mistakeThisRound = false;
                waitingForNext = false;
                usedIndices = [];
                gameoverMsg.style.display = 'none';
                consonantDisplay.style.opacity = '1';
                loadNewConsonant();
                correctionNote.innerHTML = '';
            }

            // Listeners
            nextButton.addEventListener('click', nextConsonantAction);
            restartButton.addEventListener('click', restartGame);

            // Start
            window.addEventListener('load', () => {
                gameActive = true;
                currentLives = 3;
                updateHeartsUI();
                updateProgressUI();
                usedIndices = [];
                loadNewConsonant();
            });
        })();
    </script>
</body>
</html>